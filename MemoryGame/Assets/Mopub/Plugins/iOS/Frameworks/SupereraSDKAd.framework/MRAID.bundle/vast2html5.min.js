!function(a){"object"==typeof exports?module.exports=a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";var b={},c=Math.max,d=Math.min;b.c={},b.c.d=a(document),b.c.t=function(a){return a.originalEvent.touches.length-1},b.o=function(){var c=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.w=0,this.h=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.scale=1,this.relative=!1,this.relativeWidth=!1,this.relativeHeight=!1,this.$div=null,this.run=function(){var b=function(a,b){var d;for(d in b)c.o[d]=b[d];c._carve().init(),c._configure()._draw()};if(!this.$.data("kontroled")){if(this.$.data("kontroled",!0),this.extend(),this.o=a.extend({min:void 0!==this.$.data("min")?this.$.data("min"):0,max:void 0!==this.$.data("max")?this.$.data("max"):100,stopper:!0,readOnly:this.$.data("readonly")||"readonly"===this.$.attr("readonly"),cursor:this.$.data("cursor")===!0&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:null==this.$.data("displayinput")||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:!1,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(a){return a},parse:function(a){return parseFloat(a)}},this.o),this.o.flip="anticlockwise"===this.o.rotation||"acw"===this.o.rotation,this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(b){var d=a(this);c.i[b]=d,c.v[b]=c.o.parse(d.val()),d.bind("change blur",function(){var a={};a[b]=d.val(),c.val(c._validate(a))})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),""===this.v&&(this.v=this.o.min),this.$.bind("change blur",function(){c.val(c._validate(c.o.parse(c.$.val())))})),!this.o.displayInput&&this.$.hide(),this.$c=a(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$div=a('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>'),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null,!this.c)throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=this.o.width%1!==0&&this.o.width.indexOf("%"),this.relativeHeight=this.o.height%1!==0&&this.o.height.indexOf("%"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",b).parent().bind("configure",b),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}},this._carve=function(){if(this.relative){var a=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),b=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(a,b)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+"px",height:this.h+"px"}),this.$c.attr({width:this.w,height:this.h}),1!==this.scale&&(this.$c[0].width=this.$c[0].width*this.scale,this.$c[0].height=this.$c[0].height*this.scale,this.$c.width(this.w),this.$c.height(this.h)),this},this._draw=function(){var a=!0;c.g=c.c,c.clear(),c.dH&&(a=c.dH()),a!==!1&&c.draw()},this._touch=function(a){var d=function(a){var b=c.xy2val(a.originalEvent.touches[c.t].pageX,a.originalEvent.touches[c.t].pageY);b!=c.cv&&(c.cH&&c.cH(b)===!1||(c.change(c._validate(b)),c._draw()))};return this.t=b.c.t(a),d(a),b.c.d.bind("touchmove.k",d).bind("touchend.k",function(){b.c.d.unbind("touchmove.k touchend.k"),c.val(c.cv)}),this},this._mouse=function(a){var d=function(a){var b=c.xy2val(a.pageX,a.pageY);b!=c.cv&&(c.cH&&c.cH(b)===!1||(c.change(c._validate(b)),c._draw()))};return d(a),b.c.d.bind("mousemove.k",d).bind("keyup.k",function(a){if(27===a.keyCode){if(b.c.d.unbind("mouseup.k mousemove.k keyup.k"),c.eH&&c.eH()===!1)return;c.cancel()}}).bind("mouseup.k",function(a){b.c.d.unbind("mousemove.k mouseup.k keyup.k"),c.val(c.cv)}),this},this._xy=function(){var a=this.$c.offset();return this.x=a.left,this.y=a.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(a){a.preventDefault(),c._xy()._mouse(a)}).bind("touchstart",function(a){a.preventDefault(),c._xy()._touch(a)}),this.listen()),this.relative&&a(window).resize(function(){c._carve().init(),c._draw()}),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(a){var b=~~((0>a?-.5:.5)+a/this.o.step)*this.o.step;return Math.round(100*b)/100},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(a){},this.val=function(a){},this.xy2val=function(a,b){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(a,b){var c;return a=a.substring(1,7),c=[parseInt(a.substring(0,2),16),parseInt(a.substring(2,4),16),parseInt(a.substring(4,6),16)],"rgba("+c[0]+","+c[1]+","+c[2]+","+b+")"},this.copy=function(a,b){for(var c in a)b[c]=a[c]}},b.Dial=function(){b.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=a.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(a,b){return null==a?this.v:(a=this.o.parse(a),void(b!==!1&&a!=this.v&&this.rH&&this.rH(a)===!1||(this.cv=this.o.stopper?c(d(a,this.o.max),this.o.min):a,this.v=this.cv,this.$.val(this.o.format(this.v)),this._draw())))},this.xy2val=function(a,b){var e,f;return e=Math.atan2(a-(this.x+this.w2),-(b-this.y-this.w2))-this.angleOffset,this.o.flip&&(e=this.angleArc-e-this.PI2),this.angleArc!=this.PI2&&0>e&&e>-.5?e=0:0>e&&(e+=this.PI2),f=e*(this.o.max-this.o.min)/this.angleArc+this.o.min,this.o.stopper&&(f=c(d(f,this.o.max),this.o.min)),f},this.listen=function(){var b,e,f,g,h=this,i=function(a){a.preventDefault();var f=a.originalEvent,g=f.detail||f.wheelDeltaX,i=f.detail||f.wheelDeltaY,j=h._validate(h.o.parse(h.$.val()))+(g>0||i>0?h.o.step:0>g||0>i?-h.o.step:0);j=c(d(j,h.o.max),h.o.min),h.val(j,!1),h.rH&&(clearTimeout(b),b=setTimeout(function(){h.rH(j),b=null},100),e||(e=setTimeout(function(){b&&h.rH(j),e=null},200)))},j=1,k={37:-h.o.step,38:h.o.step,39:h.o.step,40:-h.o.step};this.$.bind("keydown",function(b){var e=b.keyCode;if(e>=96&&105>=e&&(e=b.keyCode=e-48),f=parseInt(String.fromCharCode(e)),isNaN(f)&&(13!==e&&8!==e&&9!==e&&189!==e&&(190!==e||h.$.val().match(/\./))&&b.preventDefault(),a.inArray(e,[37,38,39,40])>-1)){b.preventDefault();var i=h.o.parse(h.$.val())+k[e]*j;h.o.stopper&&(i=c(d(i,h.o.max),h.o.min)),h.change(h._validate(i)),h._draw(),g=window.setTimeout(function(){j*=2},30)}}).bind("keyup",function(a){isNaN(f)?g&&(window.clearTimeout(g),g=null,j=1,h.val(h.$.val())):h.$.val()>h.o.max&&h.$.val(h.o.max)||h.$.val()<h.o.min&&h.$.val(h.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",i),this.$.bind("mousewheel DOMMouseScroll",i)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.w/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2*this.scale,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var a=c(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(3*this.w/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/a>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(a){this.cv=a,this.$.val(this.o.format(a))},this.angle=function(a){return(a-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.arc=function(a){var b,c;return a=this.angle(a),this.o.flip?(b=this.endAngle+1e-5,c=b-a-1e-5):(b=this.startAngle-1e-5,c=b+a+1e-5),this.o.cursor&&(b=c-this.cursorExt)&&(c+=this.cursorExt),{s:b,e:c,d:this.o.flip&&!this.o.cursor}},this.draw=function(){var a,b=this.g,c=this.arc(this.cv),d=1;b.lineWidth=this.lineWidth,b.lineCap=this.lineCap,"none"!==this.o.bgColor&&(b.beginPath(),b.strokeStyle=this.o.bgColor,b.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),b.stroke()),this.o.displayPrevious&&(a=this.arc(this.v),b.beginPath(),b.strokeStyle=this.pColor,b.arc(this.xy,this.xy,this.radius,a.s,a.e,a.d),b.stroke(),d=this.cv==this.v),b.beginPath(),b.strokeStyle=d?this.o.fgColor:this.fgColor,b.arc(this.xy,this.xy,this.radius,c.s,c.e,c.d),b.stroke()},this.cancel=function(){this.val(this.v)}},a.fn.dial=a.fn.knob=function(c){return this.each(function(){var d=new b.Dial;d.o=c,d.$=a(this),d.run()}).parent()}}),function(){function a(a){$(".dial").val(a).trigger("change")}function b(a,b){for(var d=a||[],e=function(a){a=c(a);var d=document.createElement("img");d.src=a,d.setAttribute("width","1px"),d.setAttribute("height","1px"),classToSet=b?"tracking-pixel "+b:"tracking-pixel",d.setAttribute("class",classToSet),$("body").append(d)},f=0;f<d.length;f++)e(d[f])}function c(a){var b=Math.floor(Math.random()*(Math.pow(10,8)-Math.pow(10,7))+Math.pow(10,7)),c=a.replace("[CACHEBUSTING]",b);return c}var d=30,e=.1;window.MoPlayable=window.MoPlayable||{},MoPlayable.init=function(a){var c=this;this.trackingUrls=a.trackingUrls||{},a.useNativeTimer||(this.countdownDuration=a.countdownDuration||d,this.countdownDuration<=0&&(this.countdownDuration=d),$(document).ready(function(){$(".dial").knob({readOnly:!0,min:0,max:c.countdownDuration,step:.05,rotation:"acw",width:"90px",height:"90px",thickness:".15",fgColor:"rgba(255,255,255,1)",bgColor:"rgba(255,255,255,0.5)",draw:function(){$(this.i).css("font-size","9pt"),$(this.i).val(Math.floor(this.cv))}}),MoPlayable.startTimer()})),mraid.addEventListener("viewableChange",function(){MoPlayable.isViewable()&&c.trackingUrls.impression&&c.trackingUrls.impression.length>0&&(b(c.trackingUrls.impression,"impression"),c.trackingUrls.impression=[]),a.useNativeTimer||(MoPlayable.isViewable()&&!c.counter&&c.countdownDuration>0?MoPlayable.startTimer():!MoPlayable.isViewable()&&c.counter&&MoPlayable.stopTimer())}),mraid.addEventListener("ready",function(){mraid.useCustomClose(!0)})},MoPlayable.isViewable=function(){return"true"===mraid.isViewable().toString()},MoPlayable.startTimer=function(){var b=Math.floor(1e3*e),c=this;this.counter=setInterval(function(){MoPlayable.isViewable()&&(c.countdownDuration=c.countdownDuration-e,a(c.countdownDuration),c.countdownDuration<=0&&(MoPlayable.stopTimer(),$("#dialContainer").hide(),mraid.useCustomClose(!1),MoPlayable.notifySDK("mopub://rewardedVideoEnded")))},b)},MoPlayable.stopTimer=function(){this.counter=clearInterval(this.counter)},MoPlayable.notifySDK=function(a){var b=document.createElement("iframe");b.setAttribute("src",a),document.documentElement.appendChild(b),b.parentNode.removeChild(b),b=null}}(),function(){var a=document.querySelector("meta[name=viewport]");if(a){var b=a.getAttribute("content");a.setAttribute("content",b.concat(", viewport-fit=cover"))}window.MoPlayer=window.MoPlayer||{},window.sids=window.sids||[],MoPlayer.videoTemplate='     <div id="dialContainer">        <input type="text" id="dial" class="dial" />     </div>     <div id="closeButtonTappableArea"></div>     <div id="closeContainer">       <div id="closeLabel"></div>       <div id="closeButton"></div>     </div>     <div id="finishedVideoOverlay"></div>     <div id="topGradient" class="gradient"></div>     <div id="bottomGradient" class="gradient"></div>     <div id="adsBy"></div>     <div id="socialActions"></div>     <div id="companionAd"><div class="a"></div></div>     <button type="button" class="btn" id="ctaButton"><span id="ctaText">Learn More</span></button>     <div id="industryIcon"></div>    <div class="videoUnsupported">Whoops! This video format isn\'t supported.</div>    <video id="mpVideoTag" webkit-playsinline playsinline preload="auto"></video>     <div id="progress">       <div class="progress-bar" id="progressBar" role="progressbar" style="width:0%"></div>    </div>    <div id="nugget"></div>     ',MoPlayer.init=function(a,b,c){MoPlayer.buildVideoPlayer(a);var d,e=MoPlayer.getBestVideo(a);e?(MoPlayer.setVideo(e),MoPlayer.loadVideo(),MoPlayer.hideAll(),d=MoPlayer.setOrientation(a),d.done(function(){MoPlayer.showAll(a.industryIcon),MoPlayer.setOrientationComplete=!0}),MoPlayer.buildIndustryIcon(a),MoPlayer.buildCompanionAd(a),MoPlayer.buildCompanionAdsWithSlotID(a),MoPlayer.initializeCountdownDial(),b(this.el.video)):(MoPlayer.toggleProgressIndicators(!1),MoPlayer.showVideoUnsupported(),d=$.Deferred().reject(),c&&c("Video unsupported")),MoPlayer.attachEventHandlers(a,d)},MoPlayer.hideFinishedVideoOverlay=function(){this.$el.finishedVideoOverlay.hide()},MoPlayer.initializeCountdownDial=function(){var a=this.$el.dial;a.attr("data-readOnly","true"),a.attr("data-min","0"),a.attr("data-step","0.05"),a.attr("data-rotation","acw"),a.attr("data-width","90px"),a.attr("data-height","90px"),a.attr("data-thickness",".15"),a.attr("data-fgColor","rgba(255,255,255,1)"),a.attr("data-bgColor","rgba(255,255,255,0.5)"),a.knob({draw:function(){$(this.i).css("font-size","9pt"),$(this.i).val(Math.floor(this.cv))}})},MoPlayer.setOrientation=function(a){var b=$.Deferred();return mraid.addEventListener("ready",function(){b.resolve(),MoPlayer.makeVideoFullscreen()}),b},MoPlayer.buildVideoPlayer=function(a){var b=$(a.clickSelector);b[0];mraid.addEventListener("ready",function(){mraid.useCustomClose(!0)}),b.off().empty().append($(MoPlayer.videoTemplate)).addClass("mpVideo").data("didClick",!1),this.$el={videoDiv:b,finishedVideoOverlay:b.find("#finishedVideoOverlay"),video:b.find("video"),closeLabel:b.find("#closeLabel"),closeButtonTappableArea:b.find("#closeButtonTappableArea"),closeButton:b.find("#closeButton"),closeContainer:b.find("#closeContainer"),ctaButton:b.find("#ctaButton"),ctaText:b.find("#ctaText"),progressBar:b.find("#progressBar"),progress:b.find("#progress"),nugget:b.find("#nugget"),videoUnsupported:b.find(".videoUnsupported"),companionAd:b.find("#companionAd"),companionAdLink:b.find("#companionAd .a"),dialContainer:b.find("#dialContainer"),dial:b.find("#dial"),industryIcon:b.find("#industryIcon"),adsBy:b.find("#adsBy"),socialActions:b.find("#socialActions")},a.customCtaText&&this.$el.ctaText.text(a.customCtaText),a.customSkipText?this.$el.closeLabel.text(a.customSkipText):(this.$el.closeLabel.css("width",0),this.$el.closeLabel.css("height",0)),this.el={};for(var c in this.$el)this.el[c]=this.$el[c][0];return this.el.video=this.getVideoFromPlayer(this.$el.videoDiv),b},MoPlayer.getVideoFromPlayer=function(a){return a.find("video")[0]},MoPlayer.attachEventHandlers=function(a,b){this.adIsClickableOverride=!1;var c,d=this.$el.videoDiv,e=this.el.video;e.addEventListener("error",function(b){MoPlayer.showCloseButton(!0,a),MoPlayer.toggleProgressIndicators(!1)}),mraid.addEventListener("sizeChange",function(b){MoPlayer.placeOrientationDependentElements(a),MoPlayer.makeVideoFullscreen()}),e.addEventListener("ended",function(b){e.pause(),MoPlayer.showCloseButton(!0,a),MoPlayer.toggleProgressIndicators(!1),a.companionAd?(MoPlayer.showCompanionAd(a),MoPlayer.showFinishedOverlay(!0)):MoPlayer.showFinishedOverlay(!1),a.is_rewarded_video&&mpVast.notifySDK("mopub://rewardedVideoEnded")}),e.addEventListener("loadedmetadata",function(b){MoPlayer.setCloseButton(a),MoPlayer.placeOrientationDependentElements(a),MoPlayer.setupProgressIndicators(a)}),e.addEventListener("playing",function(b){MoPlayer.placeOrientationDependentElements(a)}),e.addEventListener("timeupdate",function(b){MoPlayer.adIsClickable(e,a)&&MoPlayer.showCloseButton(!0,a),MoPlayer.updateIndustryIconVisibility(e.currentTime,a.industryIcon);var d=e.currentTime;c=window.setTimeout(function(){g(d,e.currentTime,1)&&h(e)&&MoPlayer.showCloseButton(!1,a)},1e3),window.sids.push(c)}),e.addEventListener("pause",function(){MoPlayer.showCloseButton(!0,a)}),mraid.addEventListener("error",function(){mraid.useCustomClose(!1)}),mraid.addEventListener("viewableChange",function(){var c,f=d.data("didClick");if(!MoPlayer.isViewable()||e.ended||f)if(MoPlayer.isViewable()&&f){var g=!MoPlayer.$el.industryIcon.is(":hidden"),i=!MoPlayer.$el.companionAd.is(":hidden"),j=MoPlayer.$el.companionAdLink.children("iframe").length>0;g&&i&&j||(c=window.setTimeout(mraid.close,500),window.sids.push(c),e.pause())}else MoPlayer.isViewable()||e.pause();else b.done(function(){MoPlayer.setCloseButton(a),MoPlayer.makeVideoFullscreen(),e.play(),c=window.setTimeout(function(){h(e)||e.pause()},5e3),window.sids.push(c)})});var f=function(b){(MoPlayer.adIsClickable(e,a)||MoPlayer.adIsClickableOverride)&&a.clickThroughURL&&a.clickThroughURL.length&&(d.data("didClick",!0),e.pause(),MoTracker.handleClickEvent())};[this.el.ctaButton,e].map(function(a){a.addEventListener("touchend",f,!1)}),this.$el.closeButtonTappableArea.add(this.$el.closeLabel).on("touchend",function(a){$(this).data("canClose")&&(MoTracker.handleCloseEvent(),e.pause(),mraid.close(),a.stopPropagation())})},MoPlayer.isPortrait=function(){var a=this.$el.videoDiv;return a.height()>a.width()},MoPlayer.setCloseButton=function(a){var b=this.el.video;this.$el.videoDiv;MoPlayer.adIsClickable(b,a)||""===b.src?MoPlayer.showCloseButton(!0,a):MoPlayer.hideCloseButton()},MoPlayer.hideCloseButton=function(){this.adIsClickableOverride=!1,this.$el.closeButtonTappableArea.add(this.$el.closeLabel).data("canClose",!1),this.$el.closeContainer.hide(),this.$el.ctaButton.hide(),this.$el.socialActions.hide()},MoPlayer.showCloseButton=function(a,b){this.adIsClickableOverride=!0,_.isBoolean(a)||(a=!0),""===this.el.video.src&&(a=!1),this.$el.socialActions.is(":empty")||(this.$el.socialActions.show(),a=!0),b.clickThroughURL&&b.clickThroughURL.length||(a=!1),a&&this.$el.ctaButton.show(),this.$el.closeButtonTappableArea.add(this.$el.closeLabel).data("canClose",!0),this.$el.closeContainer.show(),this.$el.dialContainer.hide(),"customCloseIcon"in b&&(this.$el.closeButton.css("backgroundSize","initial"),this.$el.closeButton.css("backgroundPosition","initial"),this.$el.closeButton.css("backgroundImage","url("+b.customCloseIcon+")"))},MoPlayer.showVideoUnsupported=function(){this.$el.videoUnsupported.show()},MoPlayer.buildIndustryIcon=function(a){var b=this.$el.industryIcon,c=a.industryIcon;if(b.hide(),c){var d=c.width,e=c.height;if(b.css("width",d),b.css("height",e),c.staticResource)b.css("background-image","url("+c.staticResource.source+")");else if(c.iFrameResource||c.htmlResource){var f=$("<iframe />");f.css("width",d),f.css("height",e),f.attr("frameBorder",0),f.attr("scrolling","no"),f.css("overflow","hidden"),f.appendTo(b),c.iFrameResource?f.attr("src",c.iFrameResource.source):f.contents().find("body").append(c.htmlResource.source)}c.clickThroughURL&&c.staticResource&&this.el.industryIcon.addEventListener("touchend",function(){MoTracker.handleIndustryIconClickEvent(),mraid.open(c.clickThroughURL)})}};var c=function(a,b){var c=parseInt(a.css("left"),10),d=a.width(),e=parseInt(a.css("top"),10),f=a.height(),g=e+f/2;b.css("left",c+d+5+"px"),b.css("top",Math.max(0,g-b.height()/2)+"px")};MoPlayer.buildAdsByCompanion=function(a,b){var d=$("<iframe />",{frameborder:0,width:a.width,height:a.height,id:"adsByIframe"});d.appendTo(this.$el.adsBy),this.$el.adsBy.height(a.height),this.$el.adsBy.width(a.width);var e=d.contents().find("body");e.css("margin","0px"),e.append(a.htmlResources[0].source),e.width(a.width),e.height(a.height),b&&c(this.$el.industryIcon,this.$el.adsBy),this.$el.adsBy.height(a.height),this.$el.adsBy.width(a.width),this.$el.adsBy.show()},MoPlayer.buildSocialActionsCompanion=function(a){var b=$("<iframe />",{frameborder:0,width:a.width,height:a.height,id:"socialActionsIframe"});b.appendTo(this.$el.socialActions);var c=b.contents().find("body");c.css("margin","0px"),c.append(a.htmlResources[0].source),c.width(a.width),c.height(a.height),this.$el.socialActions.height(a.height),this.$el.socialActions.width(a.width),this.$el.socialActions.hide()},MoPlayer.buildCompanionAdsWithSlotID=function(a){if(a.companionAdSlotIDMap){var b=a.companionAdSlotIDMap;"adsBy"in b&&MoPlayer.buildAdsByCompanion(b.adsBy,a.industryIcon),"socialActions"in b&&MoPlayer.buildSocialActionsCompanion(b.socialActions)}},MoPlayer.buildCompanionAd=function(a){if(this.$el.companionAd.hide(),a.companionAd){var b=MoPlayer.hasValidStaticResources(a),c=a.companionAd.htmlResources&&a.companionAd.htmlResources.length,d=a.companionAd.iFrameResources&&a.companionAd.iFrameResources.length,e=this.$el.videoDiv.width(),f=this.$el.videoDiv.height();if(b){var g=a.companionAd.staticResources[0].source,h=new Image,i="auto";h.addEventListener("load",function(){(h.width>e||h.height>f)&&(i="contain"),MoPlayer.$el.companionAdLink.css("background-size",i)}),h.src=g,this.$el.companionAdLink.css("background-image","url("+g+")"),a.companionAd.clickThroughURL&&this.el.companionAdLink.addEventListener("touchend",function(){MoPlayer.$el.videoDiv.data("didClick",!0),MoTracker.handleCompanionAdClickEvent(a.companionAd.clickThroughURL)})}else if(c||d){var j=a.companionAd.width>e?"100%":a.companionAd.width,k=a.companionAd.height>f?"100%":a.companionAd.height,l=$("<iframe />",{frameborder:0,width:j,height:k});l.appendTo(this.$el.companionAdLink),c?l.contents().find("body").append(a.companionAd.htmlResources[0].source):d&&l.attr("src",a.companionAd.iFrameResources[0].source)}}},MoPlayer.hasValidStaticResources=function(a){return a.companionAd.staticResources&&a.companionAd.staticResources.length},MoPlayer.showCompanionAd=function(a){MoPlayer.hasValidStaticResources(a)||MoPlayer.$el.videoDiv.data("didClick",!0),MoTracker.handleCompanionAdViewedEvent(),this.$el.companionAd.show(),this.$el.socialActions.is(":empty")&&this.$el.ctaButton.hide(),MoPlayer.placeOrientationDependentElements(a)},MoPlayer.showFinishedOverlay=function(a){a&&this.$el.socialActions.is(":empty")?this.$el.finishedVideoOverlay.css("background-color","rgba(0,0,0,1)"):(this.$el.video.css("object-fit","fill"),this.$el.video.css("-webkit-filter","blur(30px)")),this.$el.finishedVideoOverlay.show()},MoPlayer.isViewable=function(){return"true"===mraid.isViewable().toString()},MoPlayer.updateIndustryIconVisibility=function(a,b){if(b&&b.offset){var c=this.$el.industryIcon.is(":hidden"),d=a>=b.offset&&(!b.duration||a<b.offset+b.duration);c&&d?(MoTracker.handleIndustryIconViewedEvent(),this.$el.industryIcon.show()):c||d||this.$el.industryIcon.hide()}},MoPlayer.setupProgressIndicators=function(a){var b,c,f=this.el.video,h=this.$el.progressBar;if(e(f,a)){c=d(f,a);var i=c/f.duration*100;this.$el.nugget.css("left",i+"%")}else c=f.duration,this.$el.nugget.hide();var j=this.$el.dial;j.trigger("configure",{max:c}),b=window.setInterval(function(){var a=f.currentTime/f.duration*100;h.css("width",a+"%"),c>=f.currentTime&&j.val(c-f.currentTime).trigger("change"),(g(a,100)||a>100)&&window.clearInterval(b)},25)},MoPlayer.getYMarginOfVideo=function(){var a=this.el.video.videoWidth/this.el.video.videoHeight,b=this.$el.video.width(),c=this.$el.video.height(),d=(c-b/a)/2;return Math.max(0,d)},MoPlayer.placeCtaButton=function(a,b){if(MoPlayer.isPortrait())a.css("bottom","15px");else{var c=15;a.css("bottom",parseInt(b,10)+c+"px")}},MoPlayer.placeSocialActions=function(a){if(!this.$el.socialActions.is(":empty")){var b=parseInt(a.css("bottom"),10),c=a.outerHeight(),d=b+c/2,e=Math.max(d-this.$el.socialActions.height()/2,5);this.$el.socialActions.css("bottom",e+"px")}},MoPlayer.placeOrientationDependentElements=function(a){var b=MoPlayer.getYMarginOfVideo(),c=this.$el.ctaButton;MoPlayer.placeCtaButton(c,b),MoPlayer.placeSocialActions(c),this.$el.progress.css("bottom",b),this.$el.nugget.css("bottom",b)},MoPlayer.makeVideoFullscreen=function(){var a=mraid.getCurrentPosition(),b=a.width,c=a.height;this.$el.videoDiv.width(b),this.$el.videoDiv.height(c),this.$el.video.width(b),this.$el.video.height(c),MoPlayer.placeOrientationDependentElements()},MoPlayer.hideAll=function(){this.$el.video.hide(),MoPlayer.toggleProgressIndicators(!1)},MoPlayer.toggleProgressIndicators=function(a){this.$el.dialContainer.toggle(a),this.$el.progress.toggle(a),this.$el.nugget.toggle(a)},MoPlayer.showAll=function(a){mpVast.log.push("showing all"),this.$el.video.show(),a&&!a.offset&&(this.$el.industryIcon.show(),MoTracker.handleIndustryIconViewedEvent()),MoPlayer.toggleProgressIndicators(!0),this.$el.adsBy.is(":empty")||this.$el.adsBy.show()},MoPlayer.getBestVideo=function(a){var b=window.screen.availWidth,c=window.screen.availHeight,d=window.devicePixelRatio;return MoPlayer.getBestVideoByScore(a,b,c,d)},MoPlayer.setVideo=function(a){this.el.video.src=a.URL},MoPlayer.loadVideo=function(){this.el.video.load()},MoPlayer.adIsClickable=function(a,b){return MoPlayer.setOrientationComplete&&a.currentTime>=d(a,b)},MoPlayer.getNavigatorPlatform=function(){return navigator.platform},MoPlayer.getNavigatorAppVersion=function(){return navigator.appVersion};var d=function(a,b){if(b.is_rewarded_video)return a.duration;if(b.skipoffset){if("absolute"===b.skipoffset.type)return b.skipoffset.offset;if("percentage"===b.skipoffset.type)return b.skipoffset.offset*a.duration}return f(a)?5:a.duration},e=function(a,b){if(b.is_rewarded_video)return!1;if(b.skipoffset){if("absolute"===b.skipoffset.type)return b.skipoffset.offset<a.duration;if("percentage"===b.skipoffset.type)return b.skipoffset.offset<1}return f(a)},f=function(a){return a.duration>=16},g=function(a,b,c){return c=c||2,Math.abs(a-b)<Math.pow(10,-1*c)},h=function(a){return a.played.length>=1&&a.played.end(0)>0};MoPlayer.getBestVideoByScore=function(a,b,c,d){var e,f=b/c,g={"video/3gpp":1,"video/3gpp2":1,"video/mp4":1.5,"video/quicktime":1,"video/x-m4v":1},h=function(a,b,c){var d=a.width/a.height;return Math.abs(b-d)+Math.abs((c-a.width)/c)},i=function(a){var b=700,c=1500,d=a.bitrate||0;return d>=b&&c>=d?0:Math.min(Math.abs((b-d)/b),Math.abs((d-c)/c))},j=function(a){var c=g[a.mimeType];if(c&&a.width>0&&a.height>0){var e=h(a,f,b*d),j=i(a);return c/(1+e+j)}return 0},k=0;return _.forEach(a.mediaFile,function(a){var b=j(a);b>k&&(k=b,e=a)}),e}}(),function(){function a(a,b){var d={};if(a.moat){var e,f,g=1;do{var h="moatClientLevel"+g,i="moatClientSlicer"+g;if(e=c(h,a.moat)){var j="level"+g;d[j]=e}if(f=c(i,a.moat)){var k="slicer"+g;d[k]=f}g+=1}while(e||f)}return d.zMoatVASTIDs=b.moatBuyerTags||"",d}function b(a,b,c,d,e){var f=document.createElement("script"),g=[];b={adData:{ids:b,duration:c,url:e},dispatchEvent:function(a){this.sendEvent?(g&&(g.push(a),a=g,g=!1),this.sendEvent(a)):g.push(a)}},c="_moatApi"+Math.floor(1e8*Math.random());var h,i;try{h=a.ownerDocument,i=h.defaultView||h.parentWindow}catch(j){h=document,i=window}return i[c]=b,f.type="text/javascript",a&&a.insertBefore(f,a.childNodes[0]||null),f.src="https://z.moatads.com/"+d+"/moatvideo.js#"+c,b}function c(a,b){if(!b||!a)return null;var c=b.split("#")[1];if(!c)return null;var d=c.split("&");if(!d)return null;for(var e,f=0;f<d.length;++f){var g=d[f].split("=",2);if(1==g.length)return null;g[0]===a&&(e=g[1])}return e}function d(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript",c.src=a,c.async=!1,b.appendChild(c)}var e="400",f=0;Number.prototype.round=function(a){var b=Math.pow(10,a);return Math.round(this*b)/b},window.MoTracker=window.MoTracker||{},MoTracker.init=function(a,b){this.video=a,this.trackingEvents=MoTracker.mergeVideoTrackingUrls(b.trackingURLs||b.trackingEvents,b.videoTrackingUrls),this.config=b,this.iasEnabled=!b.disableViewabilityIAS,this.iasTrackingEnabled=b.sampleViewabilityIAS,this.moatEnabled=!b.disableViewabilityMoat,this.moatTrackingEnabled=b.sampleViewabilityMoat,this.viewabilityAdStoppedSent=!1,this.viewabilityTrackingEnded=!1,this.viewabilityVideoStarted=!1,this.viewabilityFirstQuartileTracked=!1,this.viewabilityMidpointTracked=!1,this.viewabilityThirdQuartileTracked=!1,this.viewabilityClickThruTracked=!1,this.viewabilityImpressionTracked=!1},MoTracker.track=function(){var c=this,f=this.video,h=this.trackingEvents,i=this.config;mraid.addEventListener("viewableChange",function(){MoPlayer.isViewable()&&(i.impression.length>0&&(g(i.impression,"impression"),i.impression=[]),c.iasEnabled&&!c.viewabilityImpressionTracked&&(MoTracker.avidSessionListener&&MoTracker.avidSessionListener.recordAdImpressionEvent(),c.viewabilityImpressionTracked=!0),h.creativeView&&(g(h.creativeView,"creativeView"),h.creativeView=[]))}),f.addEventListener("error",function(a,b){MoTracker.trackErrors(i.error,e),mpVast.log.push([a,b]),i.error=[]}),f.addEventListener("timeupdate",function(a){MoTracker.timeUpdateHandler(h,f)}),f.addEventListener("ended",function(a){g(h.complete,"complete"),h.complete=[],c.viewabilityTrackingEnded||(c.iasEnabled&&MoTracker.avidSessionListener&&MoTracker.avidSessionListener.stopTrackingVideoPlayer(),c.moatEnabled&&(MoTracker.dispatchMoatEvent("AdVideoComplete"),MoTracker.sendMoatAdStoppedEvent()),c.viewabilityTrackingEnded=!0)}),f.addEventListener("play",function(a){g(h.resume,"resume"),c.moatEnabled&&(c.viewabilityVideoStarted?MoTracker.dispatchMoatEvent("AdPlaying"):(MoTracker.dispatchMoatEvent("AdVideoStart"),c.viewabilityVideoStarted=!0))});var j={};if((c.iasEnabled||c.moatEnabled)&&i.viewabilityTrackersJson&&(j=JSON.parse(i.viewabilityTrackersJson)),c.iasEnabled){if(j.avid&&d(j.avid),i.avidBuyerURLs)for(var k in i.avidBuyerURLs)d(i.avidBuyerURLs[k]);window.avid&&window.avid.addEventListener("loaded",function(a){MoTracker.avidSessionListener=window.avid.getHtmlVideoAvidAdSessionListener(),MoTracker.avidSessionListener.startTrackingVideoPlayer(f)})}if(c.moatEnabled){var l=a(j,i);if(c.moatTrackingEnabled||l.zMoatVASTIDs&&""!==l.zMoatVASTIDs){var m=document.getElementById("mpVideoTag");f.addEventListener("loadedmetadata",function(a){MoTracker.moatApiReference=b(m,l,1e3*f.duration,"mopubinapphtmvideo468906546585",f.src)}),f.addEventListener("pause",function(a){MoTracker.dispatchMoatEvent("AdPaused")})}else c.moatEnabled=!1}},MoTracker.timeUpdateHandler=function(a,b){
    var c=b.currentTime,d=b.duration;c>=f&&a.start&&a.start.length>0&&(g(a.start,"start"),a.start=[]),(.75*d).round(2)<=c?(g(a.thirdQuartile,"thirdQuartile"),a.thirdQuartile=[],this.moatEnabled&&!this.viewabilityThirdQuartileTracked&&(MoTracker.dispatchMoatEvent("AdVideoThirdQuartile"),this.viewabilityThirdQuartileTracked=!0)):(.5*d).round(2)<=c?(g(a.midpoint,"midpoint"),a.midpoint=[],this.moatEnabled&&!this.viewabilityMidpointTracked&&(MoTracker.dispatchMoatEvent("AdVideoMidpoint"),this.viewabilityMidpointTracked=!0)):(.25*d).round(2)<=c&&(g(a.firstQuartile,"firstQuartile"),a.firstQuartile=[],this.moatEnabled&&!this.viewabilityFirstQuartileTracked&&(MoTracker.dispatchMoatEvent("AdVideoFirstQuartile"),this.viewabilityFirstQuartileTracked=!0));for(var e=0;a.progress&&e<a.progress.length;e++){var h=a.progress[e];h.fired||("absolute"===h.type&&c>=h.offset||"percentage"===h.type&&(h.offset*d).round(2)<=c)&&(g(h.urls,"progress"),h.fired=!0)}},MoTracker.handleIndustryIconClickEvent=function(){this.config.industryIconClickTracking&&(g(this.config.industryIconClickTracking,"industryIconClick"),this.config.industryIconClickTracking=[])},MoTracker.handleIndustryIconViewedEvent=function(){this.config.industryIconViewTracking&&(g(this.config.industryIconViewTracking,"industryIconView"),this.config.industryIconViewTracking=[])},MoTracker.handleCompanionAdClickEvent=function(a){a&&(this.config.companionAdClickTracking&&(this.config.companionAdClickTracking=MoTracker.clearAssetURIMacroCodes(this.config.companionAdClickTracking),g(this.config.companionAdClickTracking,"companionAdClick")),mraid.open(a))},MoTracker.handleCompanionAdViewedEvent=function(){this.config.companionAdViewTracking&&(this.config.companionAdViewTracking=MoTracker.clearAssetURIMacroCodes(this.config.companionAdViewTracking),g(this.config.companionAdViewTracking,"companionAdView"))},MoTracker.handleClickEvent=function(a){(_.isUndefined(a)||_.isNull(a))&&(a=this.config.clickThroughURL),g(this.config.clickTracking,"click"),this.iasEnabled&&!this.viewabilityClickThruTracked&&(MoTracker.avidSessionListener&&!this.viewabilityTrackingEnded&&MoTracker.avidSessionListener.recordAdClickThruEvent(),this.viewabilityClickThruTracked=!0),a&&mraid.open(a)},MoTracker.handleCloseEvent=function(){g(this.trackingEvents.close,"close"),this.trackingEvents.close=[],g(this.trackingEvents.closeLinear,"closeLinear"),this.trackingEvents.closeLinear=[],g(this.trackingEvents.skip,"skip"),this.trackingEvents.skip=[],this.viewabilityTrackingEnded||(this.iasEnabled&&MoTracker.avidSessionListener&&(MoTracker.avidSessionListener.recordAdSkippedEvent(),MoTracker.avidSessionListener.stopTrackingVideoPlayer()),this.moatEnabled&&MoTracker.sendMoatAdStoppedEvent(),this.viewabilityTrackingEnded=!0)},MoTracker.trackErrors=function(a,b){if(a){var c=$.map(a,function(a){return MoTracker.replaceErrorCodeMacro(a,b)});g(c,"error")}},MoTracker.dispatchMoatEvent=function(a){this.moatEnabled&&MoTracker.moatApiReference&&MoTracker.moatApiReference.dispatchEvent({type:a})};var g=function(a,b){for(var c=a||[],d=function(a){a=MoTracker.replaceMacroCodes(a);var c=document.createElement("img");c.src=a,c.setAttribute("width","1px"),c.setAttribute("height","1px"),classToSet=b?"tracking-pixel "+b:"tracking-pixel",c.setAttribute("class",classToSet),$("body").append(c)},e=0;e<c.length;e++)d(c[e])};MoTracker.mergeVideoTrackingUrls=function(a,b){if(!b)return a;var c=a||{};return _.merge(c,b,function(a,b){return _.isArray(a)?a.concat(b):b}),c},MoTracker.replaceMacroCodes=function(a){a=MoTracker.replaceCacheBustMacro(a);var b=this.video?this.video.currentTime:0;a=MoTracker.replaceContentPlayheadMacro(a,b);var c=this.video?this.video.src:"";return a=MoTracker.replaceAssetURIMacro(a,c)},MoTracker.replaceCacheBustMacro=function(a){var b=Math.floor(Math.random()*(Math.pow(10,8)-Math.pow(10,7))+Math.pow(10,7)),c=a.replace("[CACHEBUSTING]",b);return c},MoTracker.replaceContentPlayheadMacro=function(a,b){var c="";if(b>0){var d=Math.floor(b/3600),e=Math.floor(b/60)%60,f=(b%60).toFixed(3);c=(10>d?"0"+d:d)+":"+(10>e?"0"+e:e)+":"+(10>f?"0"+f:f),c=encodeURIComponent(c)}var g=a.replace("[CONTENTPLAYHEAD]",c);return g},MoTracker.replaceAssetURIMacro=function(a,b){b=b?encodeURIComponent(b):"";var c=a.replace("[ASSETURI]",b);return c},MoTracker.clearAssetURIMacroCodes=function(a){return a&&(a=_.map(a,function(a){return a=MoTracker.replaceAssetURIMacro(a,null)})),a},MoTracker.replaceErrorCodeMacro=function(a,b){var c=parseInt(b,10).toString(),d=a.replace("[ERRORCODE]",c);return d},MoTracker.sendMoatAdStoppedEvent=function(){this.moatEnabled&&!this.viewabilityAdStoppedSent&&(MoTracker.dispatchMoatEvent("AdStopped"),this.viewabilityAdStoppedSent=!0)}}();var MPVastParser=function(a,b){var c="https://ads.mopub.com/vast_fetch?r=",d=[408,504,598,599],e="301",f="900",g="303",h="100",i=10,j="Icons",k="Icon",l="IconClicks",m="IconClickThrough",n="IconClickTracking",o="IconViewTracking",p="width",q="height",r="offset",s="duration",t=300,u=function(){this.version="unknown",this.ads=[],this.error=null,this.errorURLs=[]},v=function(){this.id="",this.inline=null,this.wrapper=null},w=function(){this.creatives=[],this.errorURLs=[],this.extensions=[],this.impressionURLs=[]},x=function(){this.creatives=[],this.errorURLs=[],this.impressionURLs=[],this.vast=null},y=function(){this.id=null,this.sequence=null,this.adID=null,this.linearAd=null,this.companionAds=[]},z=function(){this.duration=null,this.trackingEvents={},this.mediaFiles=[],this.clickThroughURL=null,this.clickTrackingURLs=[],this.customClickURLs=[],this.skipOffset=null,this.skipOffsetType=null,this.industryIcons=[]},A=function(){this.id=null,this.width=0,this.height=0,this.assetWidth=0,this.assetHeight=0,this.adSlotID=null,this.trackingEvents={},this.clickThroughURL=null,this.clickTrackingURLs=[],this.staticResources=[],this.iFrameResources=[],this.htmlResources=[]},B=function(){this.height=0,this.width=0,this.offset=null,this.duration=null,this.clickThroughURL=null,this.clickTrackingURLs=[],this.viewTrackingURLs=[],this.iFrameResource=null,this.htmlResource=null,this.staticResource=null},C=function(){this.id=null,this.delivery="progressive",this.mimeType=null,this.bitrate=0,this.width=0,this.height=0,this.URL=null};this.parseVastXMLString=function(a){var c=D(a);if(c)return E(c);MoTracker.trackErrors(b,h);var d=new u;return d.error="XML parsing error.",d};var D=function(a){var b=mpUtils.cleanXML(a);if(""===b)return null;var c;try{c=$.parseXML("<mopubRoot>"+b+"</mopubRoot>")}catch(d){return null}return c},E=function(a){var c=new u,d=$(a).find("VAST");c.version=d.attr("version"),c.errorURLs=X(d),c.ads=c.ads.concat(F(d));var e=d.children("Error");return e.length>0&&d.children().length===e.length?MoTracker.trackErrors(c.errorURLs,g):(0===c.ads.length||c.error)&&MoTracker.trackErrors(b,f),c},F=function(c){var d=[];if(c.children("Ad").each(function(){var a=$(this),b=parseInt(a.attr("sequence"),10);if(isNaN(b)||1>=b){var c=new v;c.id=a.attr("id"),a.children("InLine").length&&(c.inline=G(a),d.push(c))}}),!d.length){var f=c.find("Ad > Wrapper").length>0;f&&(a>=i?MoTracker.trackErrors(b,e):c.children("Ad").each(function(){var a=$(this),b=parseInt(a.attr("sequence"),10);if(isNaN(b)||1>=b){var c=new v;if(c.id=a.attr("id"),a.children("Wrapper").length){var e=H(a);e.vast&&(c.wrapper=e,d.push(c))}}}))}return d},G=function(a){var b=a.children("InLine").first(),c=new w;return c.impressionURLs=V(b),c.errorURLs=X(b),c.creatives=P(b),c.extensions=I(b),c},H=function(g){var h=g.children("Wrapper").first(),i=new x;i.impressionURLs=V(h),i.errorURLs=X(h),i.creatives=P(h),i.extensions=J(h);var j,k=b.concat(i.errorURLs),l=c+encodeURIComponent(h.find("VASTAdTagURI").text());try{j=new XMLHttpRequest,j.open("GET",l,!1),j.send(null)}catch(m){return k&&(-1!=$.inArray(j.statusCode,d)?MoTracker.trackErrors(k,e):MoTracker.trackErrors(k,f)),i.vast=null,i}var n=new MPVastParser(a+1,k.slice()),o=n.parseVastXMLString(j.responseText);return o.error||0===o.ads.length?i.vast=null:i.vast=o,i},I=function(a){var b=a.children("Extensions").first(),c={};return b.children("Extension").children().each(function(){var a=$(this),b=a.prop("tagName");switch(b){case"MoPubCtaText":c.customCtaText=c.customCtaText||M(a);break;case"MoPubSkipText":c.customSkipText=c.customSkipText||N(a);break;case"MoPubCloseIcon":c.customCloseIcon=c.customCloseIcon||O(a);break;case"AVID":c.avidBuyerURLs=L(a);break;case"AdVerifications":c.moatBuyerTags=K(a)}}),c},J=function(a){var b=a.children("Extensions").first(),c={};return b.children("Extension").children().each(function(){var a=$(this),b=a.prop("tagName");switch(b){case"AVID":c.avidBuyerURLs=L(a);break;case"AdVerifications":c.moatBuyerTags=K(a);break;case"MoPubCtaText":c.customCtaText=c.customCtaText||M(a);break;case"MoPubSkipText":c.customSkipText=c.customSkipText||N(a);break;case"MoPubCloseIcon":c.customCloseIcon=c.customCloseIcon||O(a)}}),c},K=function(a){var b=[];return a.children("Verification").each(function(){if("Moat"==$(this).attr("vendor")){var a=$.trim($(this).html());b.push(a)}}),b.join(";")},L=function(a){var b=[];return a.children("AdVerifications").children("Verification").children("JavascriptResource").each(function(){var a=$.trim($(this).text());b.push(a)}),b},M=function(a){var b=$.trim(a.text());return b.length>0&&b.length<=15?b:null},N=function(a){var b=$.trim(a.text());return b.length>0?b:null},O=function(a){var b=$.trim(a.text());return 0===b.toLowerCase().lastIndexOf("http",0)?b:null},P=function(a){var b=[];return a.children("Creatives").each(function(){$(this).children("Creative").each(function(){var a=$(this),c=new y;c.id=a.attr("id"),c.sequence=a.attr("sequence"),c.adID=a.attr("AdID"),c.linearAd=Q(a),c.companionAds=T(a),b.push(c)})}),b},Q=function(a){var b=null;return a.children("Linear").length>0&&(b=new z,a.children("Linear").each(function(){var a=$(this);if(b.duration=ba(a.children("Duration").first().text()),b.trackingEvents=W(a),b.mediaFiles=U(a),b.industryIcons=S(a),a.children("VideoClicks").length){var c=a.children("VideoClicks").first();b.clickThroughURL=$.trim(c.children("ClickThrough").first().text()),b.clickTrackingURLs=c.children("ClickTracking").map(function(){return $.trim($(this).text())}).get(),b.customClickURLs=c.children("CustomClick").map(function(){return $.trim($(this).text())}).get()}if(a.attr("skipoffset")){var d=aa(a.attr("skipoffset"));d&&(b.skipOffset=d.offset,b.skipOffsetType=d.type)}})),b},R=function(a){var b=[],c=[],d=[];a.children("IFrameResource").each(function(){var a={};a.source=$.trim($(this).text()),b.push(a)}),a.children("StaticResource").each(function(){var a={};a.source=$.trim($(this).text()),a.creativeType=$(this).attr("creativeType"),c.push(a)}),a.children("HTMLResource").each(function(){var a={};a.source=$.trim($(this).text()),d.push(a)});var e={};return e.iFrameResources=b,e.staticResources=c,e.htmlResources=d,e},S=function(a){var b=[];return a.children(j).each(function(){$(this).children(k).each(function(){var a=$(this),c=new B,d=$(this).attr(p),e=$(this).attr(q);if(d&&e&&(c.width=parseInt(d,10),c.height=parseInt(e,10),d>0&&t>=d&&e>0&&t>=e)){var f=R(a);if(f.staticResources.length>0)c.staticResource=f.staticResources[0];else if(f.htmlResources.length>0)c.htmlResource=f.htmlResources[0];else{if(!(f.iFrameResources.length>0))return!0;c.iFrameResource=f.iFrameResources[0]}offset=a.attr(r),duration=a.attr(s);var g=a.children(l).first();if(clickThroughURL=$.trim(g.children(m).first().text()),clickThroughURL&&(c.clickThroughURL=clickThroughURL,g.children(n).each(function(){var a=$(this),b=$.trim(a.text());b&&c.clickTrackingURLs.push(b)})),a.children(o).each(function(){var a=$(this),b=$.trim(a.text());b&&c.viewTrackingURLs.push(b)}),offset){var h=ba(offset);c.offset=0>=h?null:h}if(duration){var i=ba(duration);c.duration=0>=i?null:i}b.push(c)}})}),b},T=function(a){var b=[];return a.children("CompanionAds").each(function(){$(this).children("Companion").each(function(){var a=$(this),c=new A;c.id=$(this).attr("id"),c.width=parseInt($(this).attr("width")||0,10),c.height=parseInt($(this).attr("height")||0,10),c.assetWidth=parseInt($(this).attr("assetWidth")||0,10),c.assetHeight=parseInt($(this).attr("assetHeight")||0,10),c.adSlotID=$(this).attr("adSlotID"),c.trackingEvents=W(a),c.clickThroughURL=$.trim(a.children("CompanionClickThrough").first().text()),c.clickTrackingURLs=a.children("CompanionClickTracking").map(function(){return $.trim($(this).text())}).get();var d=R(a);c.staticResources=d.staticResources,c.iFrameResources=d.iFrameResources,c.htmlResources=d.htmlResources,b.push(c)})}),b},U=function(a){var b=[];return a.find("MediaFile").each(function(){$this=$(this);var a=new C;a.id=$(this).attr("id"),a.delivery=$(this).attr("delivery"),a.mimeType=$(this).attr("type"),a.bitrate=parseInt($(this).attr("bitrate")||0,10),a.width=parseInt($(this).attr("width")||0,10),a.height=parseInt($(this).attr("height")||0,10),a.URL=$.trim($(this).text()),b.push(a)}),b},V=function(a){return _.compact(a.children("Impression").map(function(){return $.trim($(this).text())}).get())},W=function(a){var b={};return a.children("TrackingEvents").each(function(){$(this).children("Tracking").each(function(){var a=$(this).attr("event");if(a){b[a]=b[a]||[];var c={};c.id=$(this).attr("id"),c.offset=$(this).attr("offset"),c.URL=$.trim($(this).text()),b[a].push(c)}})}),b},X=function(a){var b=[];return a.children("Error").each(function(){var a=$.trim($(this).text());b.push(a)}),b},Y=/^(\d{1,2}|100)%$/,Z=/^(\d{2}):(\d{2}):(\d{2})(.\d{3})?$/,aa=function(a){var b=a.match(Y);if(b&&2==b.length)return{offset:parseInt(b[0],10)/100,type:"percentage"};var c=ba(a);return-1!=c?{offset:c,type:"absolute"}:null},ba=function(a){var b=a.match(Z);if(!b||b.length<4)return-1;var c=60*parseInt(b[1])*60+60*parseInt(b[2])+parseInt(b[3]);return b[4]&&(c+=parseInt(b[4].substr(1))/1e3),c}};!function(){window.mpUtils=window.mpUtils||{},window.sids=window.sids||[],mpUtils.userAgent=mpUtils.userAgent||{},mpUtils.cleanXML=function(a){return a.replace(/\n/g,"").replace(/\t/g,"").replace(/\<\?xml.*?\?\>/g,"").replace(/<AdParameters>.*?<\/AdParameters>/gi,"")},window.mpVast=window.mpVast||{};var a="900",b="https://ads.mopub.com/vast_fetch?r=";mpVast.log=[],mpVast.init=function(a){try{this.removeAllTimers();var b;if(b=_.has(a,"nurl")?mpVast.loadVastFromURL(a.nurl):mpVast.loadVastFromDOM(a.vastSelector),!b)return void mpVast.notifySDK("mopub://failLoad");var c=mpVast.getPlaybackCandidatesFromVastObject(b),d=j(c,a),e=mpVast.getMoTrackerConfig(c,a);MoPlayer.init(d,function(a){mpVast.video=a,MoTracker.init(a,e),MoTracker.track(),a.addEventListener("canplaythrough",function(){mpVast.notifySDK("mopub://precacheComplete")})},function(a){this.log.push(a),console.log("No video, aborting"),mpVast.notifySDK("mopub://failLoad")})}catch(f){this.log.push(f),mpVast.notifySDK("mopub://failLoad")}},mpVast.loadVastFromDOM=function(a){var b=$(a).text();return mpVast.loadVastFromString(b)},mpVast.loadVastFromURL=function(a){var c=b+encodeURIComponent(a),d=new XMLHttpRequest;return d.open("GET",c,!1),d.send(null),200!=d.status?(mraid.close(),!1):mpVast.loadVastFromString(d.responseText)},mpVast.loadVastFromString=function(a){var b=new MPVastParser(0,[]),c=b.parseVastXMLString(a);return c&&!c.error&&c.ads.length?c:(mraid.close(),!1)};var c=function(a){this.linearAd=a.linearAd,this.extensions=a.extensions||[],this.companionAds=a.companionAds||[],this.errorURLs=a.errorURLs||[],this.impressionURLs=a.impressionURLs||[]};mpVast.getPlaybackCandidatesFromVastObject=function(b){var e=[];return _.each(b.ads,function(a){var b,j,k;if(a.inline)b=a.inline.creatives,j=i(a.inline.creatives),k=_.compact(_.pluck(b,"linearAd")),_.each(k,function(b){var d=new c({linearAd:b,companionAds:j,errorURLs:a.inline.errorURLs,extensions:a.inline.extensions,impressionURLs:a.inline.impressionURLs});e.push(d)});else if(a.wrapper){j=i(a.wrapper.creatives);var l=mpVast.getPlaybackCandidatesFromVastObject(a.wrapper.vast);_.each(l,function(b){d(b,j),h(b,a.wrapper),f(b,a.wrapper),g(b,a.wrapper),b.errorURLs=b.errorURLs.concat(a.wrapper.errorURLs),b.impressionURLs=b.impressionURLs.concat(a.wrapper.impressionURLs)}),e=e.concat(l)}}),_.each(e,function(b){b.errorURLs&&0===b.linearAd.mediaFiles.length&&MoTracker.trackErrors(b.errorURLs,a)}),_.filter(e,function(a){return a.linearAd.mediaFiles.length>0})};var d=function(a,b){var c=[];_.each(b,function(b){if(b.staticResources.length>0||b.htmlResources.length>0||b.iFrameResources.length>0)c.push(b);else{var d=b.trackingEvents,f=b.clickTrackingURLs||[];_.each(a.companionAds,function(a){e(a.trackingEvents,d);var b=a.clickTrackingURLs||[];a.clickTrackingURLs=b.concat(f)})}}),a.companionAds=a.companionAds.concat(c)},e=function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d=a[c]||[];a[c]=d.concat(b[c])}},f=function(a,b){b.creatives&&b.creatives.length>0&&$(b.creatives).each(function(){if(this.linearAd&&this.linearAd.industryIcons){var b=this.linearAd.industryIcons;a.linearAd.industryIcons=a.linearAd.industryIcons.concat(b)}})},g=function(a,b){b.extensions&&(b.extensions.avidBuyerURLs&&(a.extensions.avidBuyerURLs?a.extensions.avidBuyerURLs=a.extensions.avidBuyerURLs.concat(b.extensions.avidBuyerURLs):a.extensions.avidBuyerURLs=b.extensions.avidBuyerURLs),b.extensions.moatBuyerTags&&(a.extensions.moatBuyerTags?a.extensions.moatBuyerTags=a.extensions.moatBuyerTags+";"+b.extensions.moatBuyerTags:a.extensions.moatBuyerTags=b.extensions.moatBuyerTags),b.extensions.customCtaText&&(a.extensions.customCtaText=a.extensions.customCtaText||b.extensions.customCtaText),b.extensions.customSkipText&&(a.extensions.customSkipText=a.extensions.customSkipText||b.extensions.customSkipText),b.extensions.customCloseIcon&&(a.extensions.customCloseIcon=a.extensions.customCloseIcon||b.extensions.customCloseIcon))},h=function(a,b){var c=a.linearAd.trackingEvents||{},d=a.linearAd.clickTrackingURLs||[];_.each(b.creatives,function(a){if(a.linearAd){var b=a.linearAd.trackingEvents;e(c,b),d=d.concat(a.linearAd.clickTrackingURLs)}}),a.linearAd.trackingEvents=c,a.linearAd.clickTrackingURLs=d},i=function(a){var b=_.filter(a,function(a){return a.companionAds.length>0});return _.reduce(b,function(a,b){return a.concat(b.companionAds)},[])},j=function(a,b){var c={};if(!a.length)return c;var d=a[0];c.clickThroughURL=d.linearAd.clickThroughURL;var e=k(d.companionAds);e&&(c.companionAd=e);var f=o(d.companionAds);if(f&&(c.companionAdSlotIDMap=f),d.extensions.customCloseIcon&&(c.customCloseIcon=d.extensions.customCloseIcon),d.extensions.customCtaText&&(c.customCtaText=d.extensions.customCtaText),d.extensions.customSkipText&&(c.customSkipText=d.extensions.customSkipText),d.linearAd.mediaFiles&&(c.mediaFile=d.linearAd.mediaFiles),d.linearAd.skipOffsetType&&(c.skipoffset={offset:d.linearAd.skipOffset,type:d.linearAd.skipOffsetType}),d.linearAd.industryIcons.length>0){var g=d.linearAd.industryIcons[0];c.industryIcon={width:g.width,height:g.height,offset:g.offset,duration:g.duration,clickThroughURL:g.clickThroughURL,iFrameResource:g.iFrameResource,htmlResource:g.htmlResource,staticResource:g.staticResource}}return b.clickSelector&&(c.clickSelector=b.clickSelector),b.is_rewarded_video&&(c.is_rewarded_video=b.is_rewarded_video),c},k=function(a){var b=r(a);if(b.length>0){var c=Number.MAX_VALUE,d=b[0];return _.each(b,function(a){var b=u(a);c>b&&(c=b,d=a)}),d}return null},l={adsBy:{height:30,height_variation:20,width:50,width_variation:25},socialActions:{height:30,height_variation:20,width:100,width_variation:50}},m=function(a){if(a.adSlotID in l){var b=l[a.adSlotID];return Math.abs(a.height-b.height)<=b.height_variation&&Math.abs(a.width-b.width)<=b.width_variation}return!1},n=function(a){return a.adSlotID&&a.htmlResources&&a.htmlResources.length>0&&m(a)},o=function(a){var b={};return _.each(a,function(a){n(a)&&(b[a.adSlotID]=a)}),b},p=250,q=300,r=function(a){var b=[],c=[],d=[];_.each(a,function(a){a.height>=p&&a.width>=q&&!n(a)&&(a.staticResources&&a.staticResources.length>0?d.push(a):a.htmlResources&&a.htmlResources.length>0?c.push(a):a.iFrameResources&&a.iFrameResources.length>0&&b.push(a))});var e=d.concat(c,b);return e},s=40,t=60,u=function(a){var b=a.width/a.height,c=a.width*a.height,d=mpVast.screenAspectRatio(),e=mpVast.screenArea(),f=b/d,g=c/e;return s*Math.abs(Math.log(f))+t*Math.abs(Math.log(g))};mpVast.screenAspectRatio=function(){return window.screen.availWidth/window.screen.availHeight},mpVast.screenArea=function(){return window.screen.availWidth*window.screen.availHeight},mpVast.getMoTrackerConfig=function(a,b){var c={};if(!a.length)return c;var d=a[0];if(d.linearAd.clickThroughURL&&(c.clickThroughURL=d.linearAd.clickThroughURL),d.linearAd.clickTrackingURLs&&(c.clickTracking=d.linearAd.clickTrackingURLs),d.extensions.avidBuyerURLs&&(c.avidBuyerURLs=d.extensions.avidBuyerURLs),d.extensions.moatBuyerTags&&(c.moatBuyerTags=d.extensions.moatBuyerTags),d.errorURLs&&(c.error=d.errorURLs),d.impressionURLs&&(c.impression=d.impressionURLs),d.linearAd.industryIcons.length>0){var e=d.linearAd.industryIcons[0];e.clickThroughURL&&e.clickTrackingURLs.length>0&&(c.industryIconClickTracking=e.clickTrackingURLs),e.viewTrackingURLs.length>0&&(c.industryIconViewTracking=e.viewTrackingURLs)}var f=k(d.companionAds);if(f){c.companionAdClickTracking=f.clickTrackingURLs;var g=[];_.each(f.trackingEvents.creativeView,function(a){g.push(a.URL)}),c.companionAdViewTracking=g}return c.trackingEvents=_.mapValues(d.linearAd.trackingEvents,function(a,b){return"progress"===b?_.map(a,function(a){return z(a.offset,a.URL)}):_.pluck(a,"URL")}),b.impression&&(c.impression=c.impression.concat(b.impression)),b.clickTracking&&(c.clickTracking=c.clickTracking.concat(b.clickTracking)),b.videoTrackingUrls&&(c.videoTrackingUrls=b.videoTrackingUrls,c.videoTrackingUrls.companionAdView&&(c.companionAdViewTracking=_.isArray(c.companionAdViewTracking)?c.companionAdViewTracking.concat(c.videoTrackingUrls.companionAdView):c.videoTrackingUrls.companionAdView,delete c.videoTrackingUrls.companionAdView),c.videoTrackingUrls.companionAdClick&&(c.companionAdClickTracking=_.isArray(c.companionAdClickTracking)?c.companionAdClickTracking.concat(c.videoTrackingUrls.companionAdClick):c.videoTrackingUrls.companionAdClick,delete c.videoTrackingUrls.companionAdClick)),c.disableViewabilityIAS=b.disableViewabilityIAS,c.sampleViewabilityIAS=b.sampleViewabilityIAS,c.disableViewabilityMoat=b.disableViewabilityMoat,c.sampleViewabilityMoat=b.sampleViewabilityMoat,c.viewabilityTrackersJson=b.viewabilityTrackersJson,c},mpVast.constructIframe=function(a){var b=document.createElement("iframe");return b.setAttribute("src",a),document.documentElement.appendChild(b),b},mpVast.destroyIframe=function(a){a.parentNode.removeChild(a),a=null},mpVast.notifySDK=function(a){mpVast.destroyIframe(mpVast.constructIframe(a))};var v=/^(\d{1,2}|100)%$/,w=/^(\d{2}):(\d{2}):(\d{2})(.\d{3})?$/,x=function(a,b,c){var d=a.match(b);return d?c(d):!1},y=function(a){var b=function(){var b=60*parseInt(a[1])*60+60*parseInt(a[2])+parseInt(a[3]);return a[4]&&(b+=parseInt(a[4].substr(1))/1e3),b};return a?b():!1},z=function(a,b){var c=function(){var c=x(a,v,function(a){return parseInt(a[1])/100});return c!==!1?{offset:c,type:"percentage",urls:[b],fired:!1}:(c=x(a,w,y),c!==!1?{offset:c,type:"absolute",urls:[b],fired:!1}:void 0)};return a?c():!1};mpVast.removeAllTimers=function(){for(var a=window.sids.length;a--;){var b=window.sids[a];window.clearTimeout(b),_.remove(window.sids,function(a){return a==b})}}}();
